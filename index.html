<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curso PHP</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Manipula√ß√£o de Strings em PHP</h1>
    <p>Em PHP, h√° 4 formatos de strings, sendo eles <strong>Double quoted</strong>,<strong>Single quoted</strong>, <strong>Heredoc</strong>, <strong>Nowdoc</strong>. Deve-se lembrar que em PHP existe uma diferen√ßa entre string de aspas duplas (Double quoted) e aspas simples (Single quoted). Tamb√©m devemos lembrar que em PHP, para concatenarmos uma string com outra, utilizamos "." ao inv√©s de "+", como nas outras linguagens.</p>
    <h2><strong>Double Quoted e Single Quoted</strong></h2>
    <p>A diferen√ßa entre a <strong>Double Quoted</strong> e a <strong>Single Quoted</strong> √© a interpreta√ß√£o que o PHP far√°, ou seja, existe uma interpreta√ß√£o de conte√∫do. Logo, quando utilizamos Double quoted, dizemos ao php "interprete a frase". J√° em Single quoted, dizemos ao PHP "escreva a frase do jeito que est√° vendo".</p>
    <ul>
        <li>Exemplo de <strong>Double quoted</strong>: "PHP\u{1f418}" ==> PHPüêò.</li>
        <li>Utilizando o <strong>Single quoted</strong>: 'PHP\u{1f418}' ==> PHP\u{1f418}</li>
    </ul>
    <p>Agora, caso desejarmos utilizar uma <strong>constante</strong>, n√£o podemos usar os m√©todos de Quoted. Para isso √© bem simples, basta utilizarmos a <strong>CONCATENA√á√ÉO</strong> que, em PHP, √© dada por um "." (ponto)</p>
   <p>Neste caso, n√£o h√° diferen√ßa entre usar "" ou '' </p>    
    <code>
        <span>const ESTADO = "RJ";</span>
        <span></span>
        <span>Jeito errado:</span>
        <span>echo "Moro no ESTADO"; ==> Moro no ESTADO</span>
        <span>Jeito certo:</span>
        <span>echo "Moro no " . ESTADO; ==> Moro no RJ</span>
    </code>
    <p>E se caso quisermos acrescentar "" ou '' no texto sem que ocorra essas interpreta√ß√µes pelo PHP ? Nestes casos utilizamos as "<strong>Sequ√™ncia de Escape</strong>" que, neste caso (pois h√° v√°rios outros tipos de sequencia de escape), √© representada por <strong>\</strong>. Com ela, dizemos ao PHP para que mostre o s√≠mbolo de "".</p>
    <p>Como dito anteriormente, h√° v√°rios outros tipos de sequ√™ncia de escape, como alguns sendo:</p>
    <ul>
        <li>\n => Nova linha, ou seja, quebra a linha para baixo</li>
        <li>\t => Tabula√ß√£o horizontal, ou seja, ir√° criar um espa√ßo no texto</li>
        <li>\\ => Barra invertida, ou seja, ir√° mostrar a \ no texto</li>
        <li>\$ => Sinal de cifr√£o, ou seja, ir√° mostrar o $ no texto</li>
        <li>\u{} => Codepoint Unicode, ou seja, ir√° mostrar o unicode no texto</li>
    </ul>
    <h2><strong>Sintaxe Heredoc</strong></h2>
    <p>Este m√©todo √© muito pouco utilizado. Ele consiste em criar um campo em que tudo que seja escrito dentro dele, seja apresentado da forma correta. Ou seja, se quebrarmos linha e inserirmos $, ir√° aparecer a linha quebrada e o a const√¢ncia de $.</p>
    <p>Para utilizarmos esta sintaxe, basta utilizarmos <strong>&lt&lt&lt FRASE</strong>e no final de tudo <strong>FRASE;</strong>. √â muito importante ser em ma√≠sculo e estar separado dos &lt&lt&lt</p>
    <code>
        <span>$curso = "php";</span>
        <span>$ano = date('y');</span>
        <span>echo&lt&lt&lt VIOLAO</span>
        <span>Estou estudando</span>
        <span> $curso em $ano</span>
        <span>VIOLAO;</span>
        <span></span>
        <span>Estou estudando</span>
        <span> php em 2023</span>
    </code>

    <h2>Sintaxe Nowdoc</h2>
    <p>Esta sintaxe √© semelhante √† Heredoc, entretanto, na Now doc, se ocorre o oposto. Ou seja, o PHP n√£o interpretar√° o texto. Agora, para utilizarmos ele, apenas devemos inserir '' ap√≥s echo</p>
    <code>
        <span>$curso = "php";</span>
        <span>$ano = date('y');</span>
        <span>echo&lt&lt&lt 'VIOLAO'</span>
        <span>Estou estudando</span>
        <span> $curso em $ano</span>
        <span>VIOLAO;</span>
        <span></span>
        <span>Estou estudando</span>
        <span> $curso em $ano</span>
    </code>

    <h1>Obtendo Dados de Formul√°rios </h1>
    <h3>Exerc√≠cio PHP- 1</h3>
    <p>No PHP, quem estar√° processando os dados, ser√° o servidor. Por isso, diferente de JS, h√° algumas infroma√ß√µes que o formul√°rio n√£o poder√° ser esquecido. Dentre essas infroma√ß√µes, as que n√£o poder√° ser esquecida s√£o os m√©todos (<strong>method)</strong> e as a√ß√µes(<strong>action</strong>)</p>
    <p>Os <strong>method</strong> nada mais s√£o do que o m√©todo em que os dados ser√£o codificados para serem enviados ao servidor. Por exemplo, o m√©todo <strong>get</strong> ou <strong>post</strong>, onde</p>
    <ul>
        <li>GET - √© usado quando o cliente deseja obter recursos do servidor.</li>
        <li>POST- √© usado quando o cliente deseja enviar dados para processamento ao servidor, como os dados de um formul√°rio, por exemplo.</li>
    </ul>
    <p>Devemos lembrar que em PHP h√° diversas <strong>super globais</strong> e que devemos utilizar os mesmos method para as mesmas super globais. As mais utilizadas s√£o:</p>
      <ul>
        <li><strong>`$_GET`</strong>: Cont√©m dados enviados para o servidor via solicita√ß√µes GET, √∫til para recuperar par√¢metros da URL.</li>
        <li><strong>`$_POST`</strong>: Mant√©m dados enviados via solicita√ß√µes POST, comum em formul√°rios HTML para capturar informa√ß√µes do usu√°rio.</li>
        <li><strong>`$_COOKIE`</strong>: Armazena valores de cookies do navegador, permitindo lembrar informa√ß√µes entre solicita√ß√µes HTTP.</li>
        <strong>
        <li>`$_REQUEST`</strong>: Combinando $_GET, $_POST e $_COOKIE, acessa dados de diversas fontes; use com cautela por seguran√ßa.</li>  
    </ul>
    <p>J√° os <strong>action</strong> ser√° para onde ser√£o enviados os dados do formul√°rio. Por exemplo, para um arquivo formulario<strong>.php</strong></p>
    <p>Para criarmos um formul√°rio que obtenha nome e sobrenome do cliente, precisamos seguir um passo a passo.</p> 
    <p>Primeiro criamos um <strong>Form</strong> com destino em ".php". Ainda dentro do form, criamos dois <strong>label</strong> (nome e sobrenome) e dois <strong>input text</strong> (adicionamos um id para criar um costume para quando utilizar JavaScript). Ap√≥s isso, criamos um <strong>input submit</strong> como bot√£o de enviar. </p>
    <p><strong>Entretanto</strong>, ao clicarmos em "enviar", seremos direcionados para o arquivo php que criamos anteriormente (cad.php), por√©m sem os dados do cliente. Agora que entra a parte em que mexemos no arquivo php</p>
    <p>J√° no arquivo PHP, devemos "<strong>puxar</strong>" os dados das caixas de textos que criamos no html, assim como fazemos em JavaScript. Ou seja, vamos criar uma vari√°vel que receber√° uma <strong>Super global</strong> (a mesma que inserimos em <strong>method</strong>) que conter√° o nome que inserimos no "<strong>name</strong>". Por fim, printaremos na tela, ficando deste jeito: </p>
    <code>
        <span>&lt?php</span>
        <span>$n = $_GET["nome"]</span>
        <span>$s = $_GET["sobrenome"]</span>
        <span>echo "&ltp> √â um prazer te conhcer, $n $s! este √© o meu site &ltp>&l"</span>
        <span>?></span>
        <span>&lta href="javascript:history.go(-1)"> Voltar para p√°gina anterior &lt/a></span>
    </code>
    <p>Para ficar mais din√¢mico, adicionamos <strong>JavaScript</strong> para que haja a op√ß√£o de voltar a tela anterior.</p>

    <h1>Fun√ß√µes Aritm√©ticas</h1>
    <p>Algumas das fun√ß√µes aritm√©ticas s√£o</p>
    <ul>
        <li>abs() => retorna um valor absoluto (sempre ser√° positivo)</li>
        <li>base_convert() => converte n√∫meros entre diferentes bases num√©ricas, como bin√°rio, octal, decimal e hexadecimal</li>
        <li>ceil() => Arredonda um n√∫mero para cima para o inteiro mais pr√≥ximo</li>
        <li>floor() => Arredonda um n√∫mero para baixo para o inteiro mais pr√≥ximo</li>
        <li>round() => Arredonda um n√∫mero para o valor mais pr√≥ximo, com a op√ß√£o de especificar a precis√£o decimal</li>
        <li>hypot() => Usada para calcular a hipotenusa de um tri√¢ngulo ret√¢ngulo</li>
        <li>intdiv() => Utilizada para realizar a divis√£o de n√∫meros inteiros e obter o resultado como um n√∫mero inteiro, descartando qualquer parte decimal.</li>
        <li>min(), max() => Mostra o valor m√≠nimo ou m√°ximo todos os n√∫meros</li>
        <li>pi() => Utiliza o valor de pi 3,14...</li>
        <li>pow() => usados para calcular a pot√™ncia de um n√∫mero. Permite trabalhar com pot√™ncias fracion√°rias e negativas.</li>
        <li>sin(), cos(), tan() => Seno, Cosseno e Tangente </li>
        <li>sqrt() => Calcula raiz quadrada e um n√∫mero</li>
    </ul>
    <code>
        <span>abs(-2000) => 2000</span>
        <span>base_convert(254, 10, 8) => converter o n√∫mero 254 da base 10 para base 8 => 376</span>
        <span>ceil(4,2) => 5</span>
        <span>floor(4,7) => 4</span>
        <span>round(4,567, 2) => 4,57</span>
        <span>float hypot (3, 4) => 5</span>
        <span>intdiv(10, 3) => 3</span>
        <span>min (5, 2) => 2</span>
        <span>sqrt(81) => 9</span>
    </code>

    <h1>Conversor de Moeda Simples</h1>
    <p>Primeiro devemos criar a base do conversor. Para isso, vamos primeiro criar as vari√°veis <strong>dolar</strong>(onde iremos p√¥r a cota√ß√£o <strong>fixa</strong> de hoje) e a real (onde iremos p√¥r o valor que desejamos converter para o dolar).</p>
    <p>Em seguida, iremos utilizar uma <strong>biblioteca internacionalizada</strong> para que a formata√ß√£o seja do pa√≠s que inserirmos. Para isso, vamos criar uma vari√°vel que receber√° a fun√ß√£o <strong>numfmt_create(''pt_BR'', NumberFormatter::CURRENCY)</strong>. Ou seja, tudo que usarmos a vari√°vel que recebeu esta fun√ß√£o, receber√° um n√∫mero apresentado no idiota do Brasil, j√° que, por exemplo, nos EUA eles utilizam o . cara casas decimais e a , para valores acima de 1.000. Contudo, est√° fun√ß√£o far√° essa convers√£o para o idioma selecionado, j√° que <strong>CURRENCY</strong> signifca moeda.</p>
    <p>Por √∫ltimo, iremos dar um <strong>echo</strong> com a fun√ß√£o <strong>numfmt_format_currency(vari√°vel 1, vari√°vel 2, ''moeda'') concatenado com outra fun√ß√£o semelhante, por√©m na moeda que queremos convertida. Ficaremos com o c√≥digo assim</strong></p>
    <code>
        <span>$cota√ß√£o = 5.59</span>
        <span>$real = 1000</span>
        <span>$dolar = $real / $cota√ß√£o</span>
        <span></span>
        <span>$padr√£o = numfmt_create(''pt_BR'', NumberFormatter::CURRENCY);</span>
        <span></span>
        <span>echo "Seus " . numfmt_format_currency($padr√£o, $real, "BRL") . "equivalem a " . numfmt_format_currency($padr√£o, $dolar, "USD")</span>
        <span>---------------</span>
        <span>Seus R$1.000,00 equivalem a U$193,42</span>
    </code>
    <p>Em resumo, o programa ir√° pegar o $real e dividir pela $cota√ß√£o para se obter o $dolar. Com isso, faremos uma vari√°vem $padr√£o para receber a fun√£o em que converta a 'nacionalidade' para a moeda local, respeitando a ortografia do pa√≠s selecionado. Por fim, o programa printar√° o formato da moeda com base no $padr√£o, no $real e na moeda 'BRL para o formato desejado que seria $padr√£o, $dolar e a moeda local de l√° 'USD'.</p>

    <h1>Conversor de Moedas Avan√ßados</h1>
    <P>Diferente do Conversor simples, este aqui consegue pegar a cota√ß√£o atual do dolar, direto do site do Banco Central do Brasil. Com isso, n√£o h√° a necessidade de fazer altera√ß√µes manuais</P>
    <p>Para fazermos precisamos pegar a API direto do site do BCB. Logo ap√≥s, inserimos o que desejamos da API e exportamos a URL em json. Por fim, criamos duas vari√°veis, sendo uma para a URL que criamos e outra para os dados que a URL nos dar√°.</p>
    <p>A segunda vari√°vel dever√° receber o c√≥digo '<strong>json_decode(file_get_contents($url), true);</strong>'. Isso far√° com que o a vari√°vel em PHP seja convertida em JSON.</p>
    <p>Por fim, criamos uma √∫ltima vari√°vel para que possamos trazer os dados gerados pela URL para a tela. A sequencia seria <strong>$dados["value"]["0"]["cotacaoCompra"]</strong>. Entretanto, para que funcione no dia atual ,precisamos criar outras duas vari√°veis para que seja o <strong>in√≠cio</strong> e o <strong>fim</strong> dos dias que iremos fazer a cota√ß√£o. </p>
    <code>
        <span>php</span>
        <span>$inicio = date("m-d-Y". strtotime("-7 days"))</span>
        <span>$fim = date("d-m-Y")</span>
        <span>$url= https://olinda.bcb.gov.br/olinda/servico/PTAX/versao/v1/odata/CotacaoDolarPeriodo(dataInicial=@dataInicial,dataFinalCotacao=@dataFinalCotacao)?@dataInicial=<strong>\''. $inicio .'\'</strong>&@dataFinalCotacao=<strong>\''. $final .'\'</strong>&$top=1&$orderby=dataHoraCotacao%20desc&$format=json&$select=cotacaoCompra,dataHoraCotacao</span>
        <span></span>
        <span></span>
        <span>$dados = json_decode(file_get_contents($url), true);</span>
        <span>$cota√ß√£o = $dados["value"]["0"]["cotacaoCompra"];</span>
        <p>echo "A cota√ß√£o foi $cota√ß√£o</p>
    </code>

    <h1>Retro alimenta√ß√£o em PHP</h1>
    <p>Nos exemplos anteriores tinhamos um problema de que, ao preenchermos um formul√°rio e enviar, eramos direcionados para outra p√°gina em PHP. Ou seja, haver√° um arquivo em HTML e outo em PHP. Na retro alimenta√ß√£o, utilizamos apenas um arquivo em PHP, onde ao respondermos um forumul√°rio, o resultado ser√° enviado para o pr√≥prio arquivo e o exibir√° na mesma p√°gina.</p>
    <p>Para isso, devemos criar um <strong>form</strong> com um <strong>action</strong> que receber√° uma <strong>short tag</strong> de echo. Logo ap√≥s, inserimos uma vari√°vel <strong>SERVER</strong> que receber√° o comando <strong>PHP_SELF</strong></p>
    <p>Por fim desta etapa, criamos 2 label e 2 input do tipo <strong>number</strong> para inserirmos os valores. Tamb√©m adicioanmos a tag <strong>value</strong> que receber√° $valor1 e a outra $valor2. Assim, fazemos um input do tipo <strong>submit</strong> para somar os valores.</p>
    <p>Agora que criamos os formul√°rio, devemos fazer a parte para capturar os dados. Para isso, devemos (dentro de um comando php), criar as duas vari√°veis que inserimos l√° em cima ($valor1 e $valor2) que receber√£o as <strong>super globais</strong> $_GET e o valor do input</p>
    <p>Teremos esse c√≥digo</p>
    <code>
        <span>&lt?php</span>
        <span>$valor1 = $GET['v1'] ?? 0;</span>
        <span>$valor1 = $GET['v2'] ?? 0;</span>
        <span>?></span>
        <span></span>
        <span>&ltmain></span>
        <span>Somador de Valores</span>
        <span>&ltform action="&lt=$_SEVER['PHP_SELF']?>" method="get"></span>
         <span>&ltlabel for="v1">Valor 1&lt/label></span>
         <span>&ltinput type="number" name="v1" id="v1" value="&lt?=$valor1?>"></span>
         <span>&ltlabel for="v2">Valor 2&lt/label></span>
         <span>&ltinput type="number" name="v2" id="v2" value="&lt?=$valor2?>"></span>
         <span>&ltinput type="submit" value="somar"></span>
        <span>&lt/main></span>
    </code>
    <p>E agora, para finalizar, criamos o resutado em outra section (super importante) e com outro c√≥digo em php</p>
    <code>
        <span>&ltsection id="resultado"></span>
        <span>&lt?php</span>
        <span>$soma = $valor1 + $valor2;</span>
        <span>print "&ltp>A soma entre os valores  $valor1 e $valor2 √© $soma&lt/p>";</span>
        <span>?></span>
        <span>&lt/section></span>
    </code>

    <h1>Criar conex√£o com banco de dados</h1>
    <p>Criar a conex√£o do PHP com banco de dados √© relativamente simples. Primeiro devemos criar as vari√°veis na <strong>ordem correta</strong>, sendo, nesta ordem: </p>
    <ul>
        <li>$host -> Endere√ßo do banco de dados</li>
        <li>$usu√°rio -> Nome do usu√°rio do banco de dados</li>
        <li>$senha -> Senha de acesso do usu√°rio do banco de dados</li>
        <li>$database -> Nome da tabela que contem no banco de dados</li>
    </ul>
    <p>Por fim, devemos inseir a √∫ltima vari√°vel, a <strong>$mysqli = new mysqli($host, $usuario, $senha, $database);</strong>. Esta vari√°vel que ser√° respons√°vel por fazer de fato a conex√£o. Agora, para testarmos se a conex√£o foi um <strong>sucesso</strong>, devemos fazer um pequeno sistema de verifica√ß√£o.</p>
    <p>Vale lembrar que o comando `new mysql` √© usado para criar um novo objeto de conex√£o MySQLi em PHP. Ele √© utilizado para estabelecer uma conex√£o com um banco de dados MySQL</p>
    <code>
        <span>if($mysqli->error) {</span>
        <span>die("Falha ao conextar ao banco de dados: " . $mysqli->error);}</span>
    </code>
    <p>Logo, temos um c√≥digo assim no final:</p>
    <code>
     <span>?php </span>
     <span>$host = 'localhost';</span>
     <span>$usuario = 'root';</span>
     <span>$senha = '';</span>
     <span>$database ='cadastrologin';</span>
     <span></span>
     <span>$mysqli = new mysqli($host, $usuario, $senha, $database</span>);

<span>if ($mysqli->error){</span>
         <span>die("Conex√£o falhou com o banco de dados:" . $mysqli->error);</span>
     <span>}</span>
     <span>?></span>
    </code>

    <p>Para n√£o termos que digitar todos esses comandos em cada p√°gina que criamos para conex√£o com banco de dados, podemos utilizar a mesma coisa que utilizamos para linkar o CSS nas p√°ginas. Neste caso usar√≠amos <strong>include("conex√£o.php")</strong>. Depois, devemos inserir este <strong>include</strong> dentro do comando ?php (este ?php <strong>DEVE</strong> ficar antes do DOCTYPE) da p√°gina que desejamos linkar a conex√£o.</p>
    <p>Agora, por fim, devemos fazer uma <strong>verifica√ß√£o</strong> se existe no banco de dados a vari√°vel email e senha. Para isso, inserimos ap√≥s o include um <strong>sistema de if e else</strong> contendo <strong>Isset</strong>(significa "existir"). Neste sistema deve incluir um <strong>strlen</strong> para que que o valor da string n√£o seja 0.</p>
    <p>Um ponto muito importante seria inserir uma vari√°vel email e senha contendo o seguinte comado <strong>real_escape_string($_POST [''])</strong>. Isso far√° com que o PHP limpe a string dentro do campo para que n√£o ocorra um <strong>SQL Injection</strong></p>
    <code>
        <span>?php </span>
<span>include('conexao.php');</span>
 <span>if(isset($_POST ['email']) || isset($_POST['senha'])) {</span>
<span></span>
    <span>if(strlen($_POST['email'] == 0)){</span>
        <span>echo "Preencha o e-mail";</span>
    <span>} else if (strlen($_POST['senha']) == 0){</span>
        <span>echo "Preencha sua senha";</span>
    <span>} else {</span>
        <span>$email = $mysqli -> real_escape_string($_POST['email']);</span>
        <span>$senha = $mysqli -> real_escape_string($_POST['senha']);</span>
    <span>}</span>
 <span>}</span>
<span>?></span>
    </code>

    <h1>Valida√ß√£o de banco de dados</h1>
    <p>Agora precisamos validar se o e-mail ou senha iseridos existem no nosso banco de dados. Para isso, primeiro vamos criar uma vari√°vel para selecionar todos os campos da tabela USUARIOS. Logo ap√≥s, selecionamos essa vari√°vel para fazer uma consulta na tabela selecionada, utilizando o comando <strong>->query()</strong></p>
    <p>O m√©todo <strong>->query()</strong> √© usado para executar consultas SQL em um banco de dados MySQL usando o objeto de conex√£o MySQLi em PHP. Ele aceita como argumento uma string contendo a consulta SQL que voc√™ deseja executar.</p>
</body>
</html>